{"remainingRequest":"C:\\Users\\12130\\Desktop\\电商实时监控平台\\vision\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\12130\\Desktop\\电商实时监控平台\\vision\\src\\views\\ScreenPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\12130\\Desktop\\电商实时监控平台\\vision\\src\\views\\ScreenPage.vue","mtime":1624005939331},{"path":"C:\\Users\\12130\\Desktop\\电商实时监控平台\\vision\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615108034129},{"path":"C:\\Users\\12130\\Desktop\\电商实时监控平台\\vision\\node_modules\\babel-loader\\lib\\index.js","mtime":1615108034142},{"path":"C:\\Users\\12130\\Desktop\\电商实时监控平台\\vision\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615108034129},{"path":"C:\\Users\\12130\\Desktop\\电商实时监控平台\\vision\\node_modules\\vue-loader\\lib\\index.js","mtime":1615108060518}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgSG90IGZyb20gJ0AvY29tcG9uZW50cy9Ib3QudnVlJw0KaW1wb3J0IE1hcCBmcm9tICdAL2NvbXBvbmVudHMvTWFwLnZ1ZScNCmltcG9ydCBSYW5rIGZyb20gJ0AvY29tcG9uZW50cy9SYW5rLnZ1ZScNCmltcG9ydCBTZWxsZXIgZnJvbSAnQC9jb21wb25lbnRzL1NlbGxlci52dWUnDQppbXBvcnQgU3RvY2sgZnJvbSAnQC9jb21wb25lbnRzL1N0b2NrLnZ1ZScNCmltcG9ydCBUcmVuZCBmcm9tICdAL2NvbXBvbmVudHMvVHJlbmQudnVlJw0KaW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICd2dWV4Jw0KaW1wb3J0IHsgZ2V0VGhlbWVWYWx1ZSB9IGZyb20gJ0AvdXRpbHMvdGhlbWVfdXRpbHMnDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEgKCkgew0KICAgIHJldHVybiB7DQogICAgICAvLyDlrprkuYnmr4/kuIDkuKrlm77ooajnmoTlhajlsY/nirbmgIENCiAgICAgIGZ1bGxTY3JlZW5TdGF0dXM6IHsNCiAgICAgICAgdHJlbmQ6IGZhbHNlLA0KICAgICAgICBzZWxsZXI6IGZhbHNlLA0KICAgICAgICBtYXA6IGZhbHNlLA0KICAgICAgICByYW5rOiBmYWxzZSwNCiAgICAgICAgaG90OiBmYWxzZSwNCiAgICAgICAgc3RvY2s6IGZhbHNlDQogICAgICB9LA0KICAgICAgbXlEYXRlVGltZTogbmV3IERhdGUoKSwNCiAgICAgIHRpbWVlcjogMA0KICAgIH0NCiAgfSwNCiAgY3JlYXRlZCAoKSB7DQogICAgLy8g5rOo5YaM5o6l5pS25Yiw5pWw5o2u55qE5Zue6LCD5Ye95pWwDQogICAgdGhpcy4kc29ja2V0LnJlZ2lzdGVyQ2FsbEJhY2soJ2Z1bGxTY3JlZW4nLCB0aGlzLnJlY3ZEYXRhKQ0KICAgIHRoaXMuJHNvY2tldC5yZWdpc3RlckNhbGxCYWNrKCd0aGVtZUNoYW5nZScsIHRoaXMucmVjdlRoZW1lQ2hhbmdlKQ0KICB9LA0KICBtb3VudGVkICgpIHsNCiAgICBjb25zdCB0aGF0ID0gdGhpcw0KICAgIGlmICh0aGlzLnRpbWVlcikgew0KICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVlcikNCiAgICB9DQogICAgdGhpcy50aW1lciA9IHNldEludGVydmFsKCgpID0+IHsNCiAgICAgIHRoYXQubXlEYXRlVGltZSA9IG5ldyBEYXRlKCkudG9Mb2NhbGVTdHJpbmcoKQ0KICAgIH0sIDEwMDApDQogIH0sDQogIGRlc3Ryb3llZCAoKSB7DQogICAgdGhpcy4kc29ja2V0LnVuUmVnaXN0ZXJDYWxsQmFjaygnZnVsbFNjcmVlbicpDQogICAgdGhpcy4kc29ja2V0LnVuUmVnaXN0ZXJDYWxsQmFjaygndGhlbWVDaGFuZ2UnKQ0KICAgIGlmICh0aGlzLnRpbWVlcikgew0KICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVlcikNCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBjaGFuZ2VTaXplIChjaGFydE5hbWUpIHsNCiAgICAgIC8vIDEu5pS55Y+YZnVsbFNjcmVlblN0YXR1c+eahOaVsOaNrg0KICAgICAgLy8gdGhpcy5mdWxsU2NyZWVuU3RhdHVzW2NoYXJ0TmFtZV0gPSAhdGhpcy5mdWxsU2NyZWVuU3RhdHVzW2NoYXJ0TmFtZV0NCiAgICAgIC8vIDIu6ZyA6KaB6LCD55So5q+P5LiA5Liq5Zu+6KGo57uE5Lu255qEc2NyZWVuQWRhcHRlcueahOaWueazlQ0KICAgICAgLy8gdGhpcy4kcmVmc1tjaGFydE5hbWVdLnNjcmVlbkFkYXB0ZXIoKQ0KICAgICAgLy8gdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgLy8gICB0aGlzLiRyZWZzW2NoYXJ0TmFtZV0uc2NyZWVuQWRhcHRlcigpDQogICAgICAvLyB9KQ0KICAgICAgLy8g5bCG5pWw5o2u5Y+R6YCB57uZ5pyN5Yqh56uvDQogICAgICBjb25zdCB0YXJnZXRWYWx1ZSA9ICF0aGlzLmZ1bGxTY3JlZW5TdGF0dXNbY2hhcnROYW1lXQ0KICAgICAgdGhpcy4kc29ja2V0LnNlbmQoew0KICAgICAgICBhY3Rpb246ICdmdWxsU2NyZWVuJywNCiAgICAgICAgc29ja2V0VHlwZTogJ2Z1bGxTY3JlZW4nLA0KICAgICAgICBjaGFydE5hbWU6IGNoYXJ0TmFtZSwNCiAgICAgICAgdmFsdWU6IHRhcmdldFZhbHVlDQogICAgICB9KQ0KICAgIH0sDQogICAgLy8g5o6l5pS25Yiw5YWo5bGP5pWw5o2u5LmL5ZCO55qE5aSE55CGDQogICAgcmVjdkRhdGEgKGRhdGEpIHsNCiAgICAgIC8vIOWPluWHuuaYr+WTquS4gOS4quWbvuihqOmcgOimgei/m+ihjOWIh+aNog0KICAgICAgY29uc3QgY2hhcnROYW1lID0gZGF0YS5jaGFydE5hbWUNCiAgICAgIC8vIOWPluWHuiwg5YiH5o2i5oiQ5LuA5LmI54q25oCBDQogICAgICBjb25zdCB0YXJnZXRWYWx1ZSA9IGRhdGEudmFsdWUNCiAgICAgIHRoaXMuZnVsbFNjcmVlblN0YXR1c1tjaGFydE5hbWVdID0gdGFyZ2V0VmFsdWUNCiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgdGhpcy4kcmVmc1tjaGFydE5hbWVdLnNjcmVlbkFkYXB0ZXIoKQ0KICAgICAgfSkNCiAgICB9LA0KICAgIGhhbmRsZUNoYW5nZVRoZW1lICgpIHsNCiAgICAgIC8vIOS/ruaUuVZ1ZVjkuK3mlbDmja4NCiAgICAgIC8vIHRoaXMuJHN0b3JlLmNvbW1pdCgnY2hhbmdlVGhlbWUnKQ0KICAgICAgY29uc29sZS5sb2coJ2hhaGFoJykNCiAgICAgIHRoaXMuJHNvY2tldC5zZW5kKHsNCiAgICAgICAgYWN0aW9uOiAndGhlbWVDaGFuZ2UnLA0KICAgICAgICBzb2NrZXRUeXBlOiAndGhlbWVDaGFuZ2UnLA0KICAgICAgICBjaGFydE5hbWU6ICcnLA0KICAgICAgICB2YWx1ZTogJycNCiAgICAgIH0pDQogICAgfSwNCiAgICByZWN2VGhlbWVDaGFuZ2UgKCkgew0KICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdjaGFuZ2VUaGVtZScpDQogICAgfQ0KICB9LA0KICBjb21wb25lbnRzOiB7DQogICAgSG90LA0KICAgIE1hcCwNCiAgICBSYW5rLA0KICAgIFNlbGxlciwNCiAgICBTdG9jaywNCiAgICBUcmVuZA0KICB9LA0KICBjb21wdXRlZDogew0KICAgIC8vIGxvZ29TcmMgKCkgew0KICAgIC8vICAgcmV0dXJuICcvc3RhdGljL2ltZy8nICsgZ2V0VGhlbWVWYWx1ZSh0aGlzLnRoZW1lKS5sb2dvU3JjDQogICAgLy8gfSwNCiAgICBoZWFkZXJTcmMgKCkgew0KICAgICAgcmV0dXJuICcvc3RhdGljL2ltZy8nICsgZ2V0VGhlbWVWYWx1ZSh0aGlzLnRoZW1lKS5oZWFkZXJCb3JkZXJTcmMNCiAgICB9LA0KICAgIHRoZW1lU3JjICgpIHsNCiAgICAgIHJldHVybiAnL3N0YXRpYy9pbWcvJyArIGdldFRoZW1lVmFsdWUodGhpcy50aGVtZSkudGhlbWVTcmMNCiAgICB9LA0KICAgIGNvbnRhaW5lclN0eWxlICgpIHsNCiAgICAgIHJldHVybiB7DQogICAgICAgIGJhY2tncm91bmRDb2xvcjogZ2V0VGhlbWVWYWx1ZSh0aGlzLnRoZW1lKS5iYWNrZ3JvdW5kQ29sb3IsDQogICAgICAgIGNvbG9yOiBnZXRUaGVtZVZhbHVlKHRoaXMudGhlbWUpLnRpdGxlQ29sb3INCiAgICAgIH0NCiAgICB9LA0KICAgIC4uLm1hcFN0YXRlKFsndGhlbWUnXSkNCiAgfQ0KfQ0K"},{"version":3,"sources":["ScreenPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ScreenPage.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"screen-container\" :style=\"containerStyle\">\r\n    <header class=\"screen-header\">\r\n      <div>\r\n        <img :src=\"headerSrc\" alt=\"\">\r\n      </div>\r\n      <span class=\"logo\">\r\n        <!-- <img :src=\"logoSrc\" alt=\"\" /> -->\r\n      </span>\r\n      <span class=\"title\">电商实时监控平台</span>\r\n      <div class=\"title-right\">\r\n        <img :src=\"themeSrc\" class=\"qiehuan\" @click=\"handleChangeTheme\">\r\n        <span class=\"datetime\">{{myDateTime}}</span>\r\n      </div>\r\n    </header>\r\n    <div class=\"screen-body\">\r\n      <section class=\"screen-left\">\r\n        <div id=\"left-top\" :class=\"[fullScreenStatus.trend ? 'fullscreen' : '']\">\r\n          <!-- 销量趋势图表 -->\r\n          <Trend ref=\"trend\"></Trend>\r\n          <div class=\"resize\">\r\n            <!-- icon-compress-alt -->\r\n            <span @click=\"changeSize('trend')\" :class=\"['iconfont', fullScreenStatus.trend ? 'icon-compress-alt' : 'icon-expand-alt']\"></span>\r\n          </div>\r\n        </div>\r\n        <div id=\"left-bottom\" :class=\"[fullScreenStatus.seller ? 'fullscreen' : '']\">\r\n          <!-- 商家销售金额图表 -->\r\n          <Seller ref=\"seller\"></Seller>\r\n          <div class=\"resize\">\r\n            <!-- icon-compress-alt -->\r\n            <span @click=\"changeSize('seller')\"  :class=\"['iconfont', fullScreenStatus.seller ? 'icon-compress-alt' : 'icon-expand-alt']\"></span>\r\n          </div>\r\n        </div>\r\n      </section>\r\n      <section class=\"screen-middle\">\r\n        <div id=\"middle-top\" :class=\"[fullScreenStatus.map ? 'fullscreen' : '']\">\r\n          <!-- 商家分布图表 -->\r\n          <Map ref=\"map\"></Map>\r\n          <div class=\"resize\">\r\n            <!-- icon-compress-alt -->\r\n            <span @click=\"changeSize('map')\"  :class=\"['iconfont', fullScreenStatus.map ? 'icon-compress-alt' : 'icon-expand-alt']\"></span>\r\n          </div>\r\n        </div>\r\n        <div id=\"middle-bottom\" :class=\"[fullScreenStatus.rank ? 'fullscreen' : '']\">\r\n          <!-- 地区销量排行图表 -->\r\n          <Rank ref=\"rank\"></Rank>\r\n          <div class=\"resize\">\r\n            <!-- icon-compress-alt -->\r\n            <span @click=\"changeSize('rank')\"  :class=\"['iconfont', fullScreenStatus.rank ? 'icon-compress-alt' : 'icon-expand-alt']\"></span>\r\n          </div>\r\n        </div>\r\n      </section>\r\n      <section class=\"screen-right\">\r\n        <div id=\"right-top\" :class=\"[fullScreenStatus.hot ? 'fullscreen' : '']\">\r\n          <!-- 热销商品占比图表 -->\r\n          <Hot ref=\"hot\"></Hot>\r\n          <div class=\"resize\">\r\n            <!-- icon-compress-alt -->\r\n            <span @click=\"changeSize('hot')\"  :class=\"['iconfont', fullScreenStatus.hot ? 'icon-compress-alt' : 'icon-expand-alt']\"></span>\r\n          </div>\r\n        </div>\r\n        <div id=\"right-bottom\" :class=\"[fullScreenStatus.stock ? 'fullscreen' : '']\">\r\n          <!-- 库存销量分析图表 -->\r\n          <Stock ref=\"stock\"></Stock>\r\n          <div class=\"resize\">\r\n            <!-- icon-compress-alt -->\r\n            <span @click=\"changeSize('stock')\"  :class=\"['iconfont', fullScreenStatus.stock ? 'icon-compress-alt' : 'icon-expand-alt']\"></span>\r\n          </div>\r\n        </div>\r\n      </section>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Hot from '@/components/Hot.vue'\r\nimport Map from '@/components/Map.vue'\r\nimport Rank from '@/components/Rank.vue'\r\nimport Seller from '@/components/Seller.vue'\r\nimport Stock from '@/components/Stock.vue'\r\nimport Trend from '@/components/Trend.vue'\r\nimport { mapState } from 'vuex'\r\nimport { getThemeValue } from '@/utils/theme_utils'\r\nexport default {\r\n  data () {\r\n    return {\r\n      // 定义每一个图表的全屏状态\r\n      fullScreenStatus: {\r\n        trend: false,\r\n        seller: false,\r\n        map: false,\r\n        rank: false,\r\n        hot: false,\r\n        stock: false\r\n      },\r\n      myDateTime: new Date(),\r\n      timeer: 0\r\n    }\r\n  },\r\n  created () {\r\n    // 注册接收到数据的回调函数\r\n    this.$socket.registerCallBack('fullScreen', this.recvData)\r\n    this.$socket.registerCallBack('themeChange', this.recvThemeChange)\r\n  },\r\n  mounted () {\r\n    const that = this\r\n    if (this.timeer) {\r\n      clearInterval(this.timeer)\r\n    }\r\n    this.timer = setInterval(() => {\r\n      that.myDateTime = new Date().toLocaleString()\r\n    }, 1000)\r\n  },\r\n  destroyed () {\r\n    this.$socket.unRegisterCallBack('fullScreen')\r\n    this.$socket.unRegisterCallBack('themeChange')\r\n    if (this.timeer) {\r\n      clearInterval(this.timeer)\r\n    }\r\n  },\r\n  methods: {\r\n    changeSize (chartName) {\r\n      // 1.改变fullScreenStatus的数据\r\n      // this.fullScreenStatus[chartName] = !this.fullScreenStatus[chartName]\r\n      // 2.需要调用每一个图表组件的screenAdapter的方法\r\n      // this.$refs[chartName].screenAdapter()\r\n      // this.$nextTick(() => {\r\n      //   this.$refs[chartName].screenAdapter()\r\n      // })\r\n      // 将数据发送给服务端\r\n      const targetValue = !this.fullScreenStatus[chartName]\r\n      this.$socket.send({\r\n        action: 'fullScreen',\r\n        socketType: 'fullScreen',\r\n        chartName: chartName,\r\n        value: targetValue\r\n      })\r\n    },\r\n    // 接收到全屏数据之后的处理\r\n    recvData (data) {\r\n      // 取出是哪一个图表需要进行切换\r\n      const chartName = data.chartName\r\n      // 取出, 切换成什么状态\r\n      const targetValue = data.value\r\n      this.fullScreenStatus[chartName] = targetValue\r\n      this.$nextTick(() => {\r\n        this.$refs[chartName].screenAdapter()\r\n      })\r\n    },\r\n    handleChangeTheme () {\r\n      // 修改VueX中数据\r\n      // this.$store.commit('changeTheme')\r\n      console.log('hahah')\r\n      this.$socket.send({\r\n        action: 'themeChange',\r\n        socketType: 'themeChange',\r\n        chartName: '',\r\n        value: ''\r\n      })\r\n    },\r\n    recvThemeChange () {\r\n      this.$store.commit('changeTheme')\r\n    }\r\n  },\r\n  components: {\r\n    Hot,\r\n    Map,\r\n    Rank,\r\n    Seller,\r\n    Stock,\r\n    Trend\r\n  },\r\n  computed: {\r\n    // logoSrc () {\r\n    //   return '/static/img/' + getThemeValue(this.theme).logoSrc\r\n    // },\r\n    headerSrc () {\r\n      return '/static/img/' + getThemeValue(this.theme).headerBorderSrc\r\n    },\r\n    themeSrc () {\r\n      return '/static/img/' + getThemeValue(this.theme).themeSrc\r\n    },\r\n    containerStyle () {\r\n      return {\r\n        backgroundColor: getThemeValue(this.theme).backgroundColor,\r\n        color: getThemeValue(this.theme).titleColor\r\n      }\r\n    },\r\n    ...mapState(['theme'])\r\n  }\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n/* 全屏样式的定义 */\r\n.fullscreen {\r\n  position: fixed!important;\r\n  top: 0 !important;\r\n  left: 0 !important;\r\n  width: 100% !important;\r\n  height: 100% !important;\r\n  margin: 0 !important;\r\n  z-index: 100;\r\n}\r\n\r\n.screen-container {\r\n  width: 100%;\r\n  height: 100%;\r\n  padding: 0 20px;\r\n  background-color: #161522;\r\n  color: #fff;\r\n  box-sizing: border-box;\r\n}\r\n.screen-header {\r\n  width: 100%;\r\n  height: 64px;\r\n  font-size: 20px;\r\n  position: relative;\r\n  > div {\r\n      img {\r\n        width: 100%;\r\n      }\r\n    }\r\n  .title {\r\n    position: absolute;\r\n    left: 50%;\r\n    top: 50%;\r\n    font-size: 20px;\r\n    transform: translate(-50%, -50%);\r\n  }\r\n  .title-right {\r\n    display: flex;\r\n    align-items: center;\r\n    position:absolute;\r\n    right: 0px;\r\n    top: 50%;\r\n    transform: translateY(-80%);\r\n  }\r\n  .qiehuan {\r\n    width: 28px;\r\n    height: 21px;\r\n    cursor: pointer;\r\n  }\r\n  .datetime {\r\n    font-size: 15px;\r\n    margin-left: 10px;\r\n  }\r\n  .logo {\r\n    position: absolute;\r\n    left: 0px;\r\n    top: 50%;\r\n    transform: translateY(-80%);\r\n    img {\r\n      height: 35px;\r\n      width: 128px;\r\n    }\r\n  }\r\n}\r\n.screen-body {\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  margin-top: 10px;\r\n  .screen-left {\r\n    height: 100%;\r\n    width: 27.6%;\r\n    #left-top {\r\n      height: 53%;\r\n      position: relative;\r\n    }\r\n    #left-bottom {\r\n      height: 31%;\r\n      margin-top: 25px;\r\n      position: relative;\r\n    }\r\n  }\r\n  .screen-middle {\r\n    height: 100%;\r\n    width: 41.5%;\r\n    margin-left: 1.6%;\r\n    margin-right: 1.6%;\r\n    #middle-top {\r\n      width: 100%;\r\n      height: 56%;\r\n      position: relative;\r\n    }\r\n    #middle-bottom {\r\n      margin-top: 25px;\r\n      width: 100%;\r\n      height: 28%;\r\n      position: relative;\r\n    }\r\n  }\r\n  .screen-right {\r\n    height: 100%;\r\n    width: 27.6%;\r\n    #right-top {\r\n      height: 46%;\r\n      position: relative;\r\n    }\r\n    #right-bottom {\r\n      height: 38%;\r\n      margin-top: 25px;\r\n      position: relative;\r\n    }\r\n  }\r\n}\r\n.resize {\r\n  position: absolute;\r\n  right: 20px;\r\n  top: 20px;\r\n  cursor: pointer;\r\n}\r\n</style>\r\n"]}]}